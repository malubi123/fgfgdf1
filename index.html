<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>GIF z napisów</title>
</head>
<body>

<input type="file" id="srtFile" accept=".srt"><br>
<button id="generate">Generuj GIF</button>
<br>
<img id="result">

<script src="https://cdnjs.cloudflare.com/ajax/libs/gifshot/0.3.2/gifshot.min.js"></script>
<script>
document.getElementById('generate').addEventListener('click', () => {
    const fileInput = document.getElementById('srtFile');
    if (!fileInput.files[0]) return alert('Wybierz plik SRT!');

    const reader = new FileReader();
    reader.onload = e => {
        const subtitles = e.target.result.split('\n').filter(l => l.trim() && !l.match(/^\d+$|-->/));
        // prosta metoda: każdy wiersz jako osobna klatka
        gifshot.createGIF({
            'text': subtitles.join('\n'),
            'fontSize': '32px',
            'fontFamily': 'Arial',
            'textColor': '#000000',
            'backgroundColor': '#ffffff',
            'interval': 1,
            'gifWidth': 500,
            'gifHeight': 100
        }, function(obj) {
            if (!obj.error) {
                document.getElementById('result').src = obj.image;
            } else {
                alert('Błąd przy generowaniu GIFa');
            }
        });
    };
    reader.readAsText(fileInput.files[0]);
});
</script>

</body>
</html>
